const a22_0x24210f=a22_0x47e6;function a22_0x47e6(_0x564b81,_0x260e0a){const _0x398a0e=a22_0x398a();return a22_0x47e6=function(_0x47e601,_0x841dfd){_0x47e601=_0x47e601-0xee;let _0x4e2ca0=_0x398a0e[_0x47e601];return _0x4e2ca0;},a22_0x47e6(_0x564b81,_0x260e0a);}(function(_0x2b77c1,_0x9de183){const _0x575be1=a22_0x47e6,_0x1aee49=_0x2b77c1();while(!![]){try{const _0x12c305=parseInt(_0x575be1(0x10e))/0x1*(-parseInt(_0x575be1(0x11c))/0x2)+parseInt(_0x575be1(0xf1))/0x3*(-parseInt(_0x575be1(0x103))/0x4)+-parseInt(_0x575be1(0xf2))/0x5+-parseInt(_0x575be1(0x13c))/0x6+parseInt(_0x575be1(0x13d))/0x7+parseInt(_0x575be1(0xfb))/0x8+parseInt(_0x575be1(0x131))/0x9*(parseInt(_0x575be1(0x10f))/0xa);if(_0x12c305===_0x9de183)break;else _0x1aee49['push'](_0x1aee49['shift']());}catch(_0x2f7272){_0x1aee49['push'](_0x1aee49['shift']());}}}(a22_0x398a,0x931d3));import{Connection,PublicKey,Keypair,TransactionInstruction,TransactionMessage,VersionedTransaction,SystemProgram,Transaction}from'@solana/web3.js';import*as a22_0x4b5bed from'@solana/spl-token';import a22_0x3a833e from'fs';import a22_0x36d20e from'path';import a22_0x4104df from'bs58';import a22_0xa786e3 from'inquirer';import{Parser}from'./parser.js';import a22_0x722b from'./createWSOL.js';import a22_0x3ef5d1 from'chalk';import{fetchMarketAccounts,fetchMarketIdFromAPI}from'./fetchMarketAccounts.js';import{getPoolKeysByPoolId}from'./getPoolKeysByPoolId.js';const __dirname=a22_0x36d20e[a22_0x24210f(0x128)](new URL(import.meta[a22_0x24210f(0x107)])[a22_0x24210f(0x12a)]),configPath=a22_0x36d20e['resolve'](__dirname,'../../config.json');async function loadConfig(){const _0x3a5b2d=a22_0x24210f;return JSON['parse'](a22_0x3a833e[_0x3a5b2d(0x135)](configPath,_0x3a5b2d(0xfa)));}async function loadWallets(){const _0x4f8181=a22_0x24210f,_0x3e47e5=await loadConfig(),_0x419ee1=_0x3e47e5[_0x4f8181(0x10d)],_0x1d309b=[];for(let _0x3d6cfc=0x1;_0x3d6cfc<=0x14;_0x3d6cfc++){const _0x3c9573=a22_0x36d20e[_0x4f8181(0x12d)](_0x419ee1,'wallet'+_0x3d6cfc+'.json');if(a22_0x3a833e[_0x4f8181(0x111)](_0x3c9573)){const _0x4b57c6=Uint8Array[_0x4f8181(0x10b)](JSON[_0x4f8181(0x141)](a22_0x3a833e[_0x4f8181(0x135)](_0x3c9573,_0x4f8181(0xfa)))),_0x17c99b=Keypair[_0x4f8181(0x138)](_0x4b57c6);_0x1d309b[_0x4f8181(0x127)]({'pubKey':_0x17c99b[_0x4f8181(0xef)][_0x4f8181(0x11b)](),'privKey':a22_0x4104df['encode'](_0x17c99b[_0x4f8181(0xf6)])});}else console[_0x4f8181(0x142)](a22_0x3ef5d1[_0x4f8181(0x123)]('File\x20'+_0x3c9573+_0x4f8181(0x13f)));}return _0x1d309b;}export function getKeypairFromBs58(_0x45951c){const _0x408364=a22_0x24210f;try{const _0x466c02=a22_0x4104df[_0x408364(0x102)](_0x45951c),_0x324bad=Uint8Array['from'](_0x466c02);return Keypair['fromSecretKey'](_0x324bad);}catch(_0x221759){console[_0x408364(0xfe)]('Error\x20creating\x20keypair:',_0x221759+_0x45951c);throw _0x221759;}}async function getTokenActBal(_0x379aad,_0x538b28){const _0x380f2e=a22_0x24210f,_0x5499fd=await loadConfig(),_0x118633=new Connection(_0x5499fd[_0x380f2e(0x12e)],'confirmed'),_0x4d632c=new PublicKey(_0x379aad['pubKey']);try{const _0x5a8966=await _0x118633[_0x380f2e(0x110)](_0x4d632c,{'mint':_0x538b28});if(_0x5a8966[_0x380f2e(0xfd)][_0x380f2e(0x11e)]===0x0)return'0';const _0x174736=_0x5a8966[_0x380f2e(0xfd)][0x0][_0x380f2e(0x11a)],_0x1a0723=await _0x118633[_0x380f2e(0x114)](_0x174736);return _0x1a0723[_0x380f2e(0xfd)][_0x380f2e(0x129)]||'0';}catch(_0x178d65){return console['error'](_0x380f2e(0x124)+_0x379aad[_0x380f2e(0x11d)]+':',_0x178d65),_0x380f2e(0x104);}}function a22_0x398a(){const _0x41b215=['cmd','privKey','An\x20error\x20occurred\x20during\x20the\x20process:','utf8','3043352wwJVNQ','blue','value','error','Transaction\x20sent!\x20Explorer:\x20https://solscan.io/tx/','Liquidity\x20pool\x20info\x20is\x20not\x20defined.\x20Cannot\x20proceed.','log','decode','100teCJVU','Error','marketId','message','url','NATIVE_MINT','marketAsks','\x20-\x20','from','Transaction\x20failed:\x20','WALLET_BUYERS_FOLDER','3067dUTWzz','20yjnNQm','getTokenAccountsByOwner','existsSync','confirmTransaction','err','getTokenAccountBalance','amount_in','floor','sign','then','all','pubkey','toString','110FPdqzM','pubKey','length','min_out_amount','\x20from\x20','675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8','finalized','yellow','Error\x20fetching\x20balance\x20for\x20wallet\x20','marketBaseVault','Choose\x20a\x20wallet\x20(pubKey\x20-\x20token\x20balance):','push','dirname','amount','pathname','authority','red','join','RPC_URL','sendTransaction','compileToV0Message','3855528oVinSl','confirmed','%\x20of\x20','marketProgramId','readFileSync','encode','prompt','fromSecretKey','getLatestBlockhash','toFixed','Failed\x20to\x20fetch\x20liquidity\x20pool\x20info.\x20Exiting\x20process.','2301498cSHTxL','1451002JLMcsf','green','\x20does\x20not\x20exist.','map','parse','warn','TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA','getAssociatedTokenAddress','marketBids','Selling\x20','publicKey','openOrders','23682ANGeST','461460aNhFKF','marketEventQueue','targetOrders','blockhash','secretKey'];a22_0x398a=function(){return _0x41b215;};return a22_0x398a();}async function chooseWallet(_0x3d3be0){const _0x8b13fe=a22_0x24210f,_0x4a820a=await loadWallets(),_0x287f63=new PublicKey(_0x3d3be0),_0x1e8be7=await Promise[_0x8b13fe(0x119)](_0x4a820a[_0x8b13fe(0x140)](async(_0x14142,_0x1c7b14)=>{const _0x1d57c2=_0x8b13fe,_0xdc0602=await getTokenActBal(_0x14142,_0x287f63);return{'name':_0x1c7b14+':\x20'+_0x14142[_0x1d57c2(0x11d)]+_0x1d57c2(0x10a)+(_0xdc0602/0xf4240)[_0x1d57c2(0x13a)](0x2),'value':{'index':_0x1c7b14,..._0x14142}};})),_0x90e753=[{'type':'list','name':'wallet','message':_0x8b13fe(0x126),'choices':_0x1e8be7}];return a22_0xa786e3[_0x8b13fe(0x137)](_0x90e753)[_0x8b13fe(0x118)](_0x585bcf=>_0x585bcf['wallet']);}async function raySell(_0x4c1446,_0x488957){const _0x22ceca=a22_0x24210f,_0x227403=await loadConfig(),_0x3c9626=new Connection(_0x227403['RPC_URL'],_0x22ceca(0x132)),_0x3f7a77=await chooseWallet(_0x4c1446),_0x1f60a6=new PublicKey(_0x3f7a77['pubKey']),_0x214615=getKeypairFromBs58(_0x3f7a77[_0x22ceca(0xf8)]),_0x1c0a8d=await a22_0x4b5bed[_0x22ceca(0x144)](a22_0x4b5bed[_0x22ceca(0x108)],_0x1f60a6),_0x2e5d01=await a22_0x722b(_0x1f60a6);let _0x29675d=null;try{console['log'](a22_0x3ef5d1[_0x22ceca(0xfc)]('Fetching\x20market\x20accounts...'));let _0x297518=await fetchMarketAccounts(_0x3c9626,a22_0x4b5bed[_0x22ceca(0x108)],new PublicKey(_0x4c1446),'confirmed');if(!_0x297518){console[_0x22ceca(0x142)](a22_0x3ef5d1[_0x22ceca(0x123)]('Market\x20accounts\x20not\x20found.\x20Attempting\x20to\x20fetch\x20ID\x20via\x20Raydium\x20API...'));const _0x22dc09=await fetchMarketIdFromAPI(a22_0x4b5bed[_0x22ceca(0x108)],new PublicKey(_0x4c1446));if(!_0x22dc09){console['error'](a22_0x3ef5d1[_0x22ceca(0x12c)]('Failed\x20to\x20fetch\x20ID\x20from\x20Raydium\x20API.\x20Exiting\x20process.'));return;}_0x297518={'id':new PublicKey(_0x22dc09)};}_0x29675d=await getPoolKeysByPoolId(_0x297518['id']['toString'](),_0x3c9626);if(!_0x29675d){console['error'](a22_0x3ef5d1[_0x22ceca(0x12c)](_0x22ceca(0x13b)));return;}}catch(_0x3badb5){console[_0x22ceca(0xfe)](a22_0x3ef5d1[_0x22ceca(0x12c)](_0x22ceca(0xf9)),_0x3badb5);return;}if(!_0x29675d){console[_0x22ceca(0xfe)](a22_0x3ef5d1[_0x22ceca(0x12c)](_0x22ceca(0x100)));return;}const _0x523982=await _0x3c9626['getTokenAccountsByOwner'](_0x1f60a6,{'mint':new PublicKey(_0x4c1446)})[_0x22ceca(0x118)](_0x3eed85=>_0x3eed85[_0x22ceca(0xfd)][0x0]['pubkey']),_0x512d86=await _0x3c9626[_0x22ceca(0x114)](_0x523982);let _0x305f69=parseInt(_0x512d86['value']['amount'],0xa);_0x488957<0x64&&(_0x305f69=Math[_0x22ceca(0x116)](_0x305f69*_0x488957/0x64),console['log'](a22_0x3ef5d1['blue'](_0x22ceca(0xee)+_0x488957+_0x22ceca(0x133)+_0x4c1446+_0x22ceca(0x120)+_0x3f7a77['pubKey'])));const _0x1db583=new PublicKey(_0x22ceca(0x121)),_0x41e98a=new Parser()['u8'](_0x22ceca(0xf7))['u64'](_0x22ceca(0x115))['u64'](_0x22ceca(0x11f)),_0x5ab419=_0x41e98a[_0x22ceca(0x136)]({'cmd':0x9,'amount_in':_0x305f69,'min_out_amount':0x0}),_0x371fa0=new TransactionInstruction({'programId':_0x1db583,'keys':[{'pubkey':new PublicKey(_0x22ceca(0x143)),'isSigner':![],'isWritable':![]},{'pubkey':new PublicKey(_0x29675d['id']),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0x12b)]),'isSigner':![],'isWritable':![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0xf0)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0xf4)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d['baseVault']),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d['quoteVault']),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0x134)]),'isSigner':![],'isWritable':![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0x105)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0x145)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0x109)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0xf3)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0x125)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d['marketQuoteVault']),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x29675d[_0x22ceca(0x12b)]),'isSigner':![],'isWritable':![]},{'pubkey':_0x523982,'isSigner':![],'isWritable':!![]},{'pubkey':_0x1c0a8d,'isSigner':![],'isWritable':!![]},{'pubkey':_0x1f60a6,'isSigner':!![],'isWritable':!![]}],'data':_0x5ab419}),_0x434539=a22_0x4b5bed['createCloseAccountInstruction'](_0x1c0a8d,_0x1f60a6,_0x214615[_0x22ceca(0xef)]),_0x13afaa=a22_0x4b5bed['createCloseAccountInstruction'](_0x523982,_0x1f60a6,_0x1f60a6),_0x1566f6=await _0x3c9626[_0x22ceca(0x139)](_0x22ceca(0x122)),_0x51bc48=_0x1566f6[_0x22ceca(0xf5)],_0xf085d3=new TransactionMessage({'payerKey':_0x214615['publicKey'],'instructions':[_0x2e5d01,_0x371fa0,_0x13afaa,_0x434539],'recentBlockhash':_0x51bc48})[_0x22ceca(0x130)](),_0x1f5d74=new VersionedTransaction(_0xf085d3);_0x1f5d74[_0x22ceca(0x117)]([_0x214615]);try{const _0x1f8d6f=await _0x3c9626[_0x22ceca(0x12f)](_0x1f5d74);console[_0x22ceca(0x101)](a22_0x3ef5d1['green'](_0x22ceca(0xff)+_0x1f8d6f));const _0x4f61fb=await _0x3c9626[_0x22ceca(0x112)](_0x1f8d6f,_0x22ceca(0x132));console['log'](a22_0x3ef5d1[_0x22ceca(0x13e)]('Transaction\x20confirmed!\x20Status:\x20'+(_0x4f61fb[_0x22ceca(0xfd)][_0x22ceca(0x113)]?_0x22ceca(0x104):'Success')));}catch(_0x4aad95){console[_0x22ceca(0xfe)](a22_0x3ef5d1[_0x22ceca(0x12c)](_0x22ceca(0x10c)+_0x4aad95[_0x22ceca(0x106)]));}}export default raySell;